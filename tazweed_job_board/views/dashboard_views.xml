<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ============================================ -->
    <!-- JOB BOARD DASHBOARD - CLIENT ACTION -->
    <!-- ============================================ -->
    
    <!-- Dashboard Client Action - OWL Component -->
    <record id="action_job_board_dashboard" model="ir.actions.client">
        <field name="name">Job Board Dashboard</field>
        <field name="tag">job_board_dashboard</field>
        <field name="target">main</field>
    </record>

    <!-- Job Posting Kanban View - Enhanced Dashboard Style -->
    <record id="job_posting_view_kanban_dashboard" model="ir.ui.view">
        <field name="name">job.posting.kanban.dashboard</field>
        <field name="model">job.posting</field>
        <field name="priority">5</field>
        <field name="arch" type="xml">
            <kanban default_group_by="state" class="o_job_board_kanban" 
                    quick_create="false" records_draggable="true">
                <field name="name"/>
                <field name="hr_job_id"/>
                <field name="job_board_id"/>
                <field name="state"/>
                <field name="view_count"/>
                <field name="application_count"/>
                <field name="posted_date"/>
                <field name="expiry_date"/>
                <field name="is_featured"/>
                <field name="is_sponsored"/>
                <progressbar field="state" colors='{"draft": "secondary", "pending": "info", "scheduled": "info", "active": "success", "paused": "warning", "expired": "danger", "closed": "dark", "failed": "danger"}'/>
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_card oe_kanban_global_click o_job_posting_card #{record.state.raw_value == 'active' ? 'border-success' : record.state.raw_value == 'expired' ? 'border-danger' : ''}">
                            <div class="oe_kanban_content">
                                <!-- Header with Job Board Badge -->
                                <div class="o_kanban_record_top mb-2">
                                    <div class="o_kanban_record_headings">
                                        <strong class="o_kanban_record_title">
                                            <field name="title"/>
                                        </strong>
                                    </div>
                                    <span class="badge bg-primary rounded-pill">
                                        <field name="job_board_id"/>
                                    </span>
                                </div>
                                
                                <!-- Reference -->
                                <div class="text-muted small mb-2">
                                    <i class="fa fa-tag me-1"/> <field name="name"/>
                                </div>
                                
                                <!-- Featured/Sponsored Badges -->
                                <div class="mb-2">
                                    <span t-if="record.is_featured.raw_value" class="badge bg-success me-1">
                                        <i class="fa fa-star"/> Featured
                                    </span>
                                    <span t-if="record.is_sponsored.raw_value" class="badge bg-warning">
                                        <i class="fa fa-bolt"/> Sponsored
                                    </span>
                                </div>
                                
                                <!-- Stats Row -->
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <div class="o_job_stat text-center p-2 bg-light rounded">
                                            <div class="fw-bold text-primary">
                                                <field name="view_count"/>
                                            </div>
                                            <div class="small text-muted">Views</div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="o_job_stat text-center p-2 bg-light rounded">
                                            <div class="fw-bold text-success">
                                                <field name="application_count"/>
                                            </div>
                                            <div class="small text-muted">Applications</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Dates -->
                                <div class="small mb-2">
                                    <div t-if="record.posted_date.value">
                                        <i class="fa fa-calendar-check-o me-1 text-success"/> 
                                        Posted: <field name="posted_date"/>
                                    </div>
                                    <div t-if="record.expiry_date.value">
                                        <i class="fa fa-calendar-times-o me-1 text-warning"/> 
                                        Expires: <field name="expiry_date"/>
                                    </div>
                                </div>
                                
                                <!-- Footer with Status -->
                                <div class="o_kanban_record_bottom mt-2 pt-2 border-top">
                                    <div class="oe_kanban_bottom_left">
                                        <field name="state" widget="label_selection" options="{'classes': {'draft': 'secondary', 'pending': 'info', 'scheduled': 'info', 'active': 'success', 'paused': 'warning', 'expired': 'danger', 'closed': 'dark', 'failed': 'danger'}}"/>
                                    </div>
                                    <div class="oe_kanban_bottom_right">
                                        <field name="activity_ids" widget="kanban_activity"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
</odoo>
