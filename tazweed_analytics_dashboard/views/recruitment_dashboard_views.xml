<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <!-- ==================== Recruitment Dashboard Views ==================== -->
    
    <!-- Dashboard Tree View -->
    <record id="view_recruitment_dashboard_tree" model="ir.ui.view">
        <field name="name">recruitment.analytics.dashboard.tree</field>
        <field name="model">recruitment.analytics.dashboard</field>
        <field name="arch" type="xml">
            <tree string="Recruitment Dashboards">
                <field name="name"/>
                <field name="date_from"/>
                <field name="date_to"/>
                <field name="total_candidates"/>
                <field name="total_placements"/>
                <field name="conversion_rate" widget="percentage"/>
                <field name="avg_time_to_fill"/>
            </tree>
        </field>
    </record>
    
    <!-- Dashboard Form View -->
    <record id="view_recruitment_dashboard_form" model="ir.ui.view">
        <field name="name">recruitment.analytics.dashboard.form</field>
        <field name="model">recruitment.analytics.dashboard</field>
        <field name="arch" type="xml">
            <form string="Recruitment Dashboard">
                <header>
                    <button name="action_refresh" string="Refresh Data" type="object" class="btn-primary" icon="fa-refresh"/>
                    <button name="action_view_candidates" string="View Candidates" type="object" class="btn-secondary" icon="fa-users"/>
                    <button name="action_view_job_orders" string="View Job Orders" type="object" class="btn-secondary" icon="fa-briefcase"/>
                    <button name="action_view_placements" string="View Placements" type="object" class="btn-secondary" icon="fa-handshake-o"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Dashboard Name"/>
                        </h1>
                    </div>
                    
                    <!-- Filters Section -->
                    <group string="Dashboard Filters" col="4">
                        <field name="date_from" widget="date"/>
                        <field name="date_to" widget="date"/>
                        <field name="view_type"/>
                        <field name="company_id" groups="base.group_multi_company"/>
                    </group>
                    
                    <group string="Filter by" col="3">
                        <field name="department_ids" widget="many2many_tags"/>
                        <field name="client_ids" widget="many2many_tags"/>
                        <field name="job_ids" widget="many2many_tags"/>
                    </group>
                    
                    <notebook>
                        <page string="Dashboard Overview" name="overview">
                            <div class="container-fluid">
                                <h3 class="text-center mt-3 mb-4">
                                    <i class="fa fa-users"/> Recruitment KPIs
                                </h3>
                                
                                <!-- KPI Cards Row 1 -->
                                <group col="4" class="mb-4">
                                    <div style="background: linear-gradient(135deg, #2196F3, #1976D2); color: white; padding: 20px; border-radius: 8px; text-align: center; margin: 5px;">
                                        <h4 style="color: white;"><i class="fa fa-user-plus"/> Total Candidates</h4>
                                        <h2 style="color: white; font-weight: bold;"><field name="total_candidates"/></h2>
                                    </div>
                                    <div style="background: linear-gradient(135deg, #4CAF50, #388E3C); color: white; padding: 20px; border-radius: 8px; text-align: center; margin: 5px;">
                                        <h4 style="color: white;"><i class="fa fa-briefcase"/> Job Orders</h4>
                                        <h2 style="color: white; font-weight: bold;"><field name="total_job_orders"/></h2>
                                    </div>
                                    <div style="background: linear-gradient(135deg, #FF9800, #F57C00); color: white; padding: 20px; border-radius: 8px; text-align: center; margin: 5px;">
                                        <h4 style="color: white;"><i class="fa fa-handshake-o"/> Placements</h4>
                                        <h2 style="color: white; font-weight: bold;"><field name="total_placements"/></h2>
                                    </div>
                                    <div style="background: linear-gradient(135deg, #9C27B0, #7B1FA2); color: white; padding: 20px; border-radius: 8px; text-align: center; margin: 5px;">
                                        <h4 style="color: white;"><i class="fa fa-calendar"/> Interviews</h4>
                                        <h2 style="color: white; font-weight: bold;"><field name="total_interviews"/></h2>
                                    </div>
                                </group>
                                
                                <!-- KPI Cards Row 2 -->
                                <group col="4" class="mb-4">
                                    <div style="background: #E3F2FD; padding: 15px; border-radius: 8px; text-align: center; border-left: 4px solid #2196F3; margin: 5px;">
                                        <h5><i class="fa fa-percent text-primary"/> Conversion Rate</h5>
                                        <h3 class="text-primary"><field name="conversion_rate"/>%</h3>
                                    </div>
                                    <div style="background: #E8F5E9; padding: 15px; border-radius: 8px; text-align: center; border-left: 4px solid #4CAF50; margin: 5px;">
                                        <h5><i class="fa fa-clock-o text-success"/> Avg Time to Fill</h5>
                                        <h3 class="text-success"><field name="avg_time_to_fill"/> days</h3>
                                    </div>
                                    <div style="background: #FFF3E0; padding: 15px; border-radius: 8px; text-align: center; border-left: 4px solid #FF9800; margin: 5px;">
                                        <h5><i class="fa fa-check-circle text-warning"/> Offer Acceptance</h5>
                                        <h3 class="text-warning"><field name="offer_acceptance_rate"/>%</h3>
                                    </div>
                                    <div style="background: #F3E5F5; padding: 15px; border-radius: 8px; text-align: center; border-left: 4px solid #9C27B0; margin: 5px;">
                                        <h5><i class="fa fa-exchange"/> Interview to Offer</h5>
                                        <h3 style="color: #9C27B0;"><field name="interview_to_offer_rate"/>%</h3>
                                    </div>
                                </group>
                                
                                <!-- Pipeline Funnel -->
                                <h3 class="text-center mt-4 mb-3">
                                    <i class="fa fa-filter"/> Recruitment Pipeline
                                </h3>
                                
                                <group col="6" class="mb-4">
                                    <div style="background: #BBDEFB; padding: 10px; border-radius: 5px; text-align: center; margin: 3px;">
                                        <h6>In Pipeline</h6>
                                        <h4><field name="candidates_in_pipeline"/></h4>
                                    </div>
                                    <div style="background: #90CAF9; padding: 10px; border-radius: 5px; text-align: center; margin: 3px;">
                                        <h6>Shortlisted</h6>
                                        <h4><field name="candidates_shortlisted"/></h4>
                                    </div>
                                    <div style="background: #64B5F6; padding: 10px; border-radius: 5px; text-align: center; margin: 3px;">
                                        <h6>Interviewed</h6>
                                        <h4><field name="candidates_interviewed"/></h4>
                                    </div>
                                    <div style="background: #42A5F5; padding: 10px; border-radius: 5px; text-align: center; margin: 3px;">
                                        <h6>Offered</h6>
                                        <h4><field name="candidates_offered"/></h4>
                                    </div>
                                    <div style="background: #4CAF50; color: white; padding: 10px; border-radius: 5px; text-align: center; margin: 3px;">
                                        <h6 style="color: white;">Hired</h6>
                                        <h4 style="color: white;"><field name="candidates_hired"/></h4>
                                    </div>
                                    <div style="background: #F44336; color: white; padding: 10px; border-radius: 5px; text-align: center; margin: 3px;">
                                        <h6 style="color: white;">Rejected</h6>
                                        <h4 style="color: white;"><field name="candidates_rejected"/></h4>
                                    </div>
                                </group>
                            </div>
                        </page>
                        
                        <page string="Detailed Data" name="data">
                            <group string="Dashboard JSON Data">
                                <field name="dashboard_data" widget="text" readonly="1" nolabel="1"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    
    <!-- Dashboard Action -->
    <record id="action_recruitment_dashboard" model="ir.actions.act_window">
        <field name="name">Recruitment Dashboard</field>
        <field name="res_model">recruitment.analytics.dashboard</field>
        <field name="view_mode">form,tree</field>
        <field name="context">{'default_name': 'Recruitment Analytics'}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first Recruitment Dashboard
            </p>
            <p>
                Track candidates, job orders, placements, and recruitment metrics.
            </p>
        </field>
    </record>
    
</odoo>
